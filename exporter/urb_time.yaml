name: urb_time
metrics:
  histograms:
  - name: urb_time
    help: Time it takes for an URB to be completed
    table: delta_hist
    bucket_type: fixed
    bucket_keys:
      - 0
      - 10
      - 20
      - 30
      - 40
      - 50
      - 60
      - 70
      - 80
      - 90
      - 100
    labels:
    - name: event_type
      size: 4
      decoders:
        - name: uint
        - name: static_map
          static_map:
            100: ACL
            200: SCO
            300: ACL ACK
    - name: bucket
      size: 4
      decoders:
        - name: uint
kprobes:
  # Order is important here
  btusb_tx_complete: receive_acl
  btusb_isoc_tx_complete: receive_sco
  hci_event_packet: receive_hci_event
  btusb_send_frame: send_frame
  btusb_send_frame_intel: send_frame
code: |
